document.addEventListener("DOMContentLoaded", function () { console.log("PantrySense Website Loaded"); let e = 0, t = document.querySelectorAll(".carousel-slide"), l = t.length, a = document.querySelector(".carousel-btn.prev"), r = document.querySelector(".carousel-btn.next"); function n(t) { (e += t) < 0 ? e = l - 1 : e >= l && (e = 0); let a = document.querySelector(".carousel-track"); a.style.transform = `translateX(-${100 * e}%)` } l && (a.addEventListener("click", () => n(-1)), r.addEventListener("click", () => n(1))); let c = document?.querySelector(".embla"); if (c) { let o = c?.querySelector(".embla__viewport"), s = c?.querySelector(".embla__prev"), i = c?.querySelector(".embla__next"), d = EmblaCarousel(o, { loop: !0 }); s.addEventListener("click", () => d.scrollPrev()), i.addEventListener("click", () => d.scrollNext()) } let m = document.getElementById("contact-form"); if (m) { let g = document.getElementById("alert"), y = document.getElementById("closebtn"), u = document.getElementById("mail"), v = document.getElementById("cc-email"); m.addEventListener("submit", function (e) { e.preventDefault(), v.value = u.value; let t = new FormData(m); fetch("https://formsubmit.co/ajax/palaciosp.596@gmail.com", { method: "POST", body: t, headers: { Accept: "application/json" } }).then(e => e.json()).then(e => { e.success ? (g.style.display = "block", setTimeout(() => { g.style.display = "none" }, 3e3), m.reset()) : alert("Error sending the message. Please try again.") }).catch(e => { console.error("Error:", e), alert("There was a problem sending the form.") }) }), y && y.addEventListener("click", function () { g.style.display = "none" }) } localStorage.getItem("contactName") && (document.getElementById("name").value = localStorage.getItem("contactName"), document.getElementById("mail").value = localStorage.getItem("contactEmail"), document.getElementById("msg").value = localStorage.getItem("contactMessage")); let E = document.querySelectorAll("img"); E.forEach(e => { e.setAttribute("loading", "lazy") }); let h = window.location.href, L = document.querySelectorAll("nav a"); L.forEach(e => { e.href === h ? e.classList.add("page-active") : e.classList.remove("page-active") }); let f = document.getElementById("darkModeToggle"); f && (f.addEventListener("click", function () { document.body.classList.toggle("dark-mode"); let e = document.body.classList.contains("dark-mode") ? "dark" : "light"; localStorage.setItem("theme", e) }), "dark" === localStorage.getItem("theme") && document.body.classList.add("dark-mode")); let b = document.querySelector(".nav-toggle"), p = document.querySelector("nav ul"); b.addEventListener("click", function () { p.classList.toggle("show") }), document.querySelectorAll("nav ul li a").forEach(e => { e.addEventListener("click", () => { p.classList.remove("show") }) }) });